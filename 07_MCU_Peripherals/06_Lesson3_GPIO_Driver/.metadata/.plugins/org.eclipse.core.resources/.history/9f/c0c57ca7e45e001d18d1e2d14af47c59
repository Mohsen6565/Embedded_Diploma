/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 */
#include "STM32_F103C6.h"
#include "STM32_F103C6_GPIO.h"

void my_wait(uint16_t x){
	for(uint16_t i=0; i<x; i++){
		for(uint8_t j=0; j<255; j++);
	}
}

int main(void)
{
	// Clock Enable for the used Ports
	RCC_GPIOA_CLK_EN();
	RCC_GPIOB_CLK_EN();
	// GPIO Pin Configuration
	GPIO_pin_config_t PinConfig ;
	// Configure B13 Pin as Push Pull Output
	PinConfig.GPIO_pin_number 	= GPIO_PIN_13 ;
	PinConfig.GPIO_pin_mode 	= GPIO_MODE_OUTPUT_PP ;
	PinConfig.GPIO_output_speed = GPIO_SPEED_10MHZ ;
	MCAL_GPIO_Init(GPIOB, &PinConfig);
	// Configure B1 Pin as Push Pull Output
	PinConfig.GPIO_pin_number 	= GPIO_PIN_1 ;
	PinConfig.GPIO_pin_mode 	= GPIO_MODE_OUTPUT_PP ;
	PinConfig.GPIO_output_speed = GPIO_SPEED_10MHZ ;
	MCAL_GPIO_Init(GPIOB, &PinConfig);
	// Configure A1 Pin as Floating Input
	PinConfig.GPIO_pin_number 	= GPIO_PIN_1 ;
	PinConfig.GPIO_pin_mode 	= GPIO_MODE_INPUT_FLOATING ;
//	PinConfig.GPIO_output_speed = GPIO_SPEED_10MHZ ;
	MCAL_GPIO_Init(GPIOA, &PinConfig);
	// Configure A11 Pin as Floating Input
	PinConfig.GPIO_pin_number 	= GPIO_PIN_11 ;
	PinConfig.GPIO_pin_mode 	= GPIO_MODE_INPUT_FLOATING ;
//	PinConfig.GPIO_output_speed = GPIO_SPEED_10MHZ ;
	MCAL_GPIO_Init(GPIOA, &PinConfig);

    while(1){
    	if(MCAL_GPIO_ReadPin(GPIOA, GPIO_PIN_11) == 1){
    		MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_13, 1);
    		my_wait(100);
    		MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_13, 0);
    		my_wait(100);
    	}
    	if(MCAL_GPIO_ReadPin(GPIOA, GPIO_PIN_1) == 0){
    		MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_1, 1);
    		my_wait(100);
    		MCAL_GPIO_WritePin(GPIOB, GPIO_PIN_1, 0);
    		my_wait(100);
    	}
    }
}
